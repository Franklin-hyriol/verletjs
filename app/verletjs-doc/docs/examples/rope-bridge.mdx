---
sidebar_position: 1
---

# Rope Bridge

A rope bridge is a classic physics simulation example. It demonstrates how to combine particles with distance and pin constraints to create a dynamic, hanging structure.

## The Concept

To build a rope bridge, we will:
1.  Create a series of particles in a line to serve as the segments of the bridge.
2.  Connect each particle to its neighbor with a `DistanceConstraint` to form the bridge deck.
3.  Pin the first and last particles of the bridge to fixed points in the world using `PinConstraint`.

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs groupId="lang">
  <TabItem value="react" label="React">

  In `verlet-react`, we can create the bridge using the `<LineSegments>` component and pin its ends by adding `<Point>` components as children with the `pinned` prop.

  ```jsx
  import React from 'react';
  import { VerletCanvas, LineSegments, Point } from 'verlet-react';
  import { Vec2 } from 'verlet-engine';

  const RopeBridge = () => {
    // Create the vertices for our bridge
    const bridgeSegments = [];
    const numSegments = 20;
    const startX = 50;
    const endX = 450;
    const yPos = 100;

    for (let i = 0; i < numSegments; i++) {
      const t = i / (numSegments - 1);
      const x = startX + (endX - startX) * t;
      bridgeSegments.push(new Vec2(x, yPos));
    }

    return (
      <VerletCanvas width={500} height={300}>
        <LineSegments vertices={bridgeSegments} stiffness={1}>
          {/* Pin the first and last points */}
          <Point index={0} pinned={true} />
          <Point index={numSegments - 1} pinned={true} />
        </LineSegments>
      </VerletCanvas>
    );
  };

  export default RopeBridge;
  ```

  </TabItem>
  <TabItem value="js" label="JavaScript">

  With `verlet-engine`, we can use the `lineSegments` helper to create the main body of the bridge and then manually pin the first and last particles of the resulting composite.

  ```javascript
  import { VerletJS, Vec2 } from 'verlet-engine';
  import { lineSegments } from 'verlet-engine/objects';

  export function setupRopeBridge(sim) {
    const bridgeSegments = [];
    const numSegments = 20;
    const startX = 50;
    const endX = 450;
    const yPos = 100;

    for (let i = 0; i < numSegments; i++) {
      const t = i / (numSegments - 1);
      const x = startX + (endX - startX) * t;
      bridgeSegments.push(new Vec2(x, yPos));
    }

    // Create the composite
    const bridge = lineSegments(sim, bridgeSegments, 1);

    // Pin the ends
    bridge.pin(0);
    bridge.pin(numSegments - 1);
  }

  // --- In your main file ---
  // const sim = new VerletJS(500, 300);
  // setupRopeBridge(sim);
  //
  // function animate() {
  //   sim.frame(16);
  //   // ... render ...
  //   requestAnimationFrame(animate);
  // }
  // animate();
  ```

  </TabItem>
</Tabs>
